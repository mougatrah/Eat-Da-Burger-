<div style="height: 100vh;" class="container ">
    <div class="row bg-success p-4">
        
<img class="img-fluid m-auto" src="/logo.png">

        
        <form class="col-12 m-2">
            <input id="newBurger" type="text" class="col-8 rounded-left" required><input type="submit" name="submit" id="addBurger" class="btn m-auto rounded-right btn-primary col-4" value="Add a burger!">
        </form>
    </div>
    <div class="row h-auto">
        <!-- left side of the screen -->
        <div id="burgerList" class="col-6 bg-info border">
            <h1 class="col-12 bg-warning border-bottom border-dark">Burgers to devour!</h1>

            {{#each burger.toEat}}
            <div class="row m-2 p-3 bg-secondary border border-dark rounded">
                <h5 class="col-7 m-auto"> {{this.burger_name}}</h5>
                <a href="#" data-name="{{this.burger_name}}" data-id="{{this.id}}" class="devour col-4 btn btn-danger">Devour!</a>
            </div>
            {{/each}}
        </div>
        <!-- right side of the screen-->
        <div class="col-6 bg-warning border" id="devouredList">
            <h1 class="col-12 bg-info border-bottom border-dark">Devoured Burgers!</h1>

            {{#each burger.eaten}}
            <div class="row m-2 p-3 bg-secondary border border-dark rounded">
                <h5 class="col-7 m-auto"> {{this.burger_name}}</h5>
                <a href="#" class="delete btn btn-danger" data-id="{{this.id}}">X</a>
            </div>
            {{/each}}

        </div>
    </div>
</div>
<script>
    $(document).on("click",".devour", function(e){
        e.preventDefault();
        console.log(e.target);
        var curId = $(e.target).attr("data-id");
        var parent = $(e.target).parent().get();
        var deleteBtn = $("<a>").addClass("delete btn btn-danger text-white").attr("data-id", curId).text("X");
        $(parent).append(deleteBtn);
        $("#devouredList").append(parent);
        $.post("/update", {name: $(e.target).attr("data-name"), id: curId});
        $(e.target).hide();
    });

    $(document).on("click", ".delete", function(e){
        e.preventDefault();
        console.log(e.target);
        $.ajax( {
            method: "DELETE",
            url: "/DANGER",
            data: {
                id: $(e.target).attr("data-id")
            }
        });
           $(e.target).parent().hide();
        })
  
  $("#addBurger").click(function(e){
      e.preventDefault();
      var newB = $("#newBurger").val().trim();
      console.log(newB)
     if(newB.length){
        
          $.post("/add", {name: $("#newBurger").val().trim()}).then(function(data){
          console.log(data);
          var div = $("<div>").addClass("row m-2 p-3 bg-secondary border border-dark rounded");
          var h5 = $("<h5>").addClass("col-7 m-auto").text(newB);
          var a = $("<a>").addClass("devour col-4 btn btn-danger").attr({
              "href": "#",
              "data-name": data.burger_name,
              "data-id": data.id}).text("Devour!");
          div.append(h5);
          div.append(a);
          $("#burgerList").append(div);
          $("#newBurger").val("");
      });
     
     }
     
  });
 
</script>